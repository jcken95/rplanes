---
title: "Rplanes Explorer"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Rplanes Explorer}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rplanes)
```

# Overview

The `rplanes::app_launcher` function allows users to interact with the functions developed for plausibility analysis in epidemiological signals. The app contains example datasets. The observed example data set was obtained from [healthdata.gov](https://healthdata.gov/Hospital/COVID-19-Reported-Patient-Impact-and-Hospital-Capa/g62h-syeh) and is the flu admissions (previous_day_admission_influenza_confirmed) aggregated by location and epidemiological week. The example forecast data set was be obtained from the [CDC FluSight hospitalization forecasts submitted during the 2021-2022 and 2022-2023 influenza seasons](https://github.com/cdcepi/Flusight-forecast-data). 

# Usage

Users can run through the app with the example data or upload their own. The accepted uploads are in .csv format. 
Users can choose to upload an observed data set and the second comparison data set can be either a forecast, or another observed data set with observations at dates that do not overlap the first data set.

The **observed data** set must contain the following columns:

| date       | location | flu.admits |
|:-----------|:--------:|:----------:|
| 2022-07-30 |    06    |     46     |
| 2023-05-27 |    17    |     24     |
| 2023-04-15 |    32    |     4      |
| 2022-02-19 |    22    |     40     |
| 2023-02-04 |    45    |     42     |

The **forecast data** set must contain the following columns:

| forecast_date |         target          | target_end_date | location |   type   | quantile | value |
|:--------------|:-----------------------:|:---------------:|:--------:|:--------:|:--------:|:-----:|
| 2023-02-06    | 2 wk ahead inc flu hosp |   2023-02-18    |    45    | quantile |   0.40   |  31   |
| 2023-02-06    | 3 wk ahead inc flu hosp |   2023-02-25    |    08    | quantile |   0.15   |   0   |
| 2023-02-06    | 2 wk ahead inc flu hosp |   2023-02-18    |    40    | quantile |   0.75   |  126  |
| 2023-02-06    | 4 wk ahead inc flu hosp |   2023-03-04    |    44    | quantile |   0.45   |   0   |
| 2023-02-06    | 2 wk ahead inc flu hosp |   2023-02-18    |    48    | quantile |   0.60   |  311  |
| 2023-02-06    | 4 wk ahead inc flu hosp |   2023-03-04    |    36    | quantile |   0.80   |  177  |
| 2023-02-06    | 3 wk ahead inc flu hosp |   2023-02-25    |    35    | quantile |   0.95   |  86   |
| 2023-02-06    | 2 wk ahead inc flu hosp |   2023-02-18    |    06    | quantile |   0.95   |  444  |
| 2023-02-06    | 2 wk ahead inc flu hosp |   2023-02-18    |    25    | quantile |   0.75   |  82   |
| 2023-02-06    | 4 wk ahead inc flu hosp |   2023-03-04    |    21    |  point   |    NA    |   0   |

- forecast_date: The date the forecast was generated.

- target: The horizon for the forecast, in the example it is a weekly
  horizon with a number for 1, 2, 3 and 4 weeks ahead.

- target_end_date: The date of the expected forecast horizon in date
  class format.

- location: Can be any type like geographic unit such as [FIPS
  code](https://www.bls.gov/respondents/mwr/electronic-data-interchange/appendix-d-usps-state-abbreviations-and-fips-codes.htm),
  or any other but must match the type in the observed dataset.

- type: The type of predicted value as a point value or quantile value.
  Can contain quantile only but not point only.

- quantile: The quantile in numeric format.

- value: The predicted outcome value for the forecast in numeric format.


## Run the App

To run the app in your web browser.

```r
rplanes::app_launcher(host = "0.0.0.0", launch.browser = TRUE, port = 80)
```




